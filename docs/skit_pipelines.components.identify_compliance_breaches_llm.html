
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>skit_pipelines.components.identify_compliance_breaches_llm package &#8212; skit_pipelines  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="skit-pipelines-components-identify-compliance-breaches-llm-package">
<h1>skit_pipelines.components.identify_compliance_breaches_llm package<a class="headerlink" href="#skit-pipelines-components-identify-compliance-breaches-llm-package" title="Permalink to this headline">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-skit_pipelines.components.identify_compliance_breaches_llm.utils">
<span id="skit-pipelines-components-identify-compliance-breaches-llm-utils-module"></span><h2>skit_pipelines.components.identify_compliance_breaches_llm.utils module<a class="headerlink" href="#module-skit_pipelines.components.identify_compliance_breaches_llm.utils" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'int'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uuid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'str'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">audio_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'str'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'str'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow_uuid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'str'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_uuid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'str'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reftime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'str'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'List[Turn]'</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skit_pipelines/components/identify_compliance_breaches_llm/utils.html#Call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.audio_url">
<span class="sig-name descname"><span class="pre">audio_url</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.audio_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.call_url">
<span class="sig-name descname"><span class="pre">call_url</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.call_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.client_uuid">
<span class="sig-name descname"><span class="pre">client_uuid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.client_uuid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.flow_uuid">
<span class="sig-name descname"><span class="pre">flow_uuid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.flow_uuid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.id">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.reftime">
<span class="sig-name descname"><span class="pre">reftime</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.reftime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.turns">
<span class="sig-name descname"><span class="pre">turns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn" title="skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn"><span class="pre">skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.turns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.uuid">
<span class="sig-name descname"><span class="pre">uuid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call.uuid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Turn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'int'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uuid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'str'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reftime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'str'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_bot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'bool'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utterance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'str'</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skit_pipelines/components/identify_compliance_breaches_llm/utils.html#Turn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.id">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.is_bot">
<span class="sig-name descname"><span class="pre">is_bot</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.is_bot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.reftime">
<span class="sig-name descname"><span class="pre">reftime</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.reftime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.utterance">
<span class="sig-name descname"><span class="pre">utterance</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.utterance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.uuid">
<span class="sig-name descname"><span class="pre">uuid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Turn.uuid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.format_call">
<span class="sig-name descname"><span class="pre">format_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call" title="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call"><span class="pre">skit_pipelines.components.identify_compliance_breaches_llm.utils.Call</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/skit_pipelines/components/identify_compliance_breaches_llm/utils.html#format_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.format_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the turns of a call representing the entire conversation into a single string that would be used as
input to the LLM model</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.get_prompt_text">
<span class="sig-name descname"><span class="pre">get_prompt_text</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/skit_pipelines/components/identify_compliance_breaches_llm/utils.html#get_prompt_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.get_prompt_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.parse_calls">
<span class="sig-name descname"><span class="pre">parse_calls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_df</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.Call" title="skit_pipelines.components.identify_compliance_breaches_llm.utils.Call"><span class="pre">skit_pipelines.components.identify_compliance_breaches_llm.utils.Call</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/skit_pipelines/components/identify_compliance_breaches_llm/utils.html#parse_calls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.parse_calls" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the turn-level dataframe obtained from fetch_calls into a list of calls</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.utils.slice_json">
<span class="sig-name descname"><span class="pre">slice_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/skit_pipelines/components/identify_compliance_breaches_llm/utils.html#slice_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.utils.slice_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice the JSON part from given text and return a parsed dictionary or list.</p>
</dd></dl>

</section>
<section id="module-skit_pipelines.components.identify_compliance_breaches_llm">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-skit_pipelines.components.identify_compliance_breaches_llm" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.identify_compliance_breaches_llm">
<span class="sig-name descname"><span class="pre">identify_compliance_breaches_llm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s3_file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/skit_pipelines/components/identify_compliance_breaches_llm.html#identify_compliance_breaches_llm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.identify_compliance_breaches_llm" title="Permalink to this definition">¶</a></dt>
<dd><p>Groups turns into calls and pushes them to an LLM (uses openai chatComplete functionality) to identify
compliance breaches. The result value for each call is written in an output csv file</p>
<p>param s3_file_path: Csv file containing turns for calls obtained from fsm Db
type s3_file_path: str</p>
<p>output: path of csv file containing complaince breach results for each call in the input</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skit_pipelines.components.identify_compliance_breaches_llm.identify_compliance_breaches_llm_op">
<span class="sig-name descname"><span class="pre">identify_compliance_breaches_llm_op</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s3_file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skit_pipelines.components.identify_compliance_breaches_llm.identify_compliance_breaches_llm_op" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify compliance breaches llm
Groups turns into calls and pushes them to an LLM (uses openai chatComplete functionality) to identify</p>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">skit_pipelines</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Pipelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="skit_pipelines.pipelines.fetch_calls_pipeline.html">Random sample calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="skit_pipelines.pipelines.fetch_n_tag_calls.html">Random sample and tag calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="skit_pipelines.pipelines.fetch_tagged_calls_dataset.html">Download tagged dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="skit_pipelines.pipelines.tag_calls.html">Upload for annotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="skit_pipelines.pipelines.fetch_tagged_entity_dataset.html">Download tagged entity dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="skit_pipelines.pipelines.retrain_slu.html">Retrain SLU</a></li>
<li class="toctree-l1"><a class="reference internal" href="skit_pipelines.pipelines.publish_compliance_breaches.html">Publish Complaince Breaches</a></li>
<li class="toctree-l1"><a class="reference internal" href="skit_pipelines.pipelines.transcription_pipeline.html">Transcribe Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="skit_pipelines.pipelines.fetch_n_tag_turns_and_calls.html">Random sample and tag turns and calls</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Author.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/skit_pipelines.components.identify_compliance_breaches_llm.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>